<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>bilive_dm - Tag - Evilmass</title><link>https://evilmass.github.io/tags/bilive_dm/</link><description>bilive_dm - Tag - Evilmass</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Tue, 23 May 2023 15:10:29 +0800</lastBuildDate><atom:link href="https://evilmass.github.io/tags/bilive_dm/" rel="self" type="application/rss+xml"/><item><title>为弹幕姬 ReTTS-Cat 插件搭建自定义 tts 引擎</title><link>https://evilmass.github.io/posts/tts_for_danmuji/</link><pubDate>Tue, 23 May 2023 15:10:29 +0800</pubDate><author>Author</author><guid>https://evilmass.github.io/posts/tts_for_danmuji/</guid><description><![CDATA[上回说到，在 huggingface 搭建好 vits server 后，平时直播的弹幕语音靠 bilive_dm 播报，有时候口糊听不清还要切窗口看一眼。然后看到弹幕姬有个自定义 tts 引擎，故考虑接入试试。
Re: TTSCat Re: TTSCat 插件 以及 仓库地址
开幕 archived 问题不大。 插件页面有自定义 tts 引擎 url 的参考格式，怎么简单怎么来（GET）。 在临时目录添加一个 mp3 文件并启动 http 服务器
1 2 3 python3 -m http.server # 自定义引擎地址填入如下 url https://127.0.0.1:8000?text=$TTSTEXT 语音成功播放后感觉 so easy，然后如无意外的出现意外了。
踩坑 fastapi 写个简单 get 接口。
1 2 3 4 5 6 7 8 9 10 @app.get(&#34;/voice&#34;) async def get_audio(token: str, text: str): if token != os.environ.get(&#34;token&#34;): return {&#34;code&#34;: 401} # vits 合成语音，返回二进制文件 audio = load_fast_vits(text) if audio is None: return {&#34;code&#34;: 500} else: return FileResponse(audio) 发送弹幕后什么都没有发生，打开调试模式看看怎么回事。 一切正常，还是什么都没有发生。 在缓存目录下找到 get 获取到的音频文件，直接播放没有问题。]]></description></item></channel></rss>